import{S as Gt,i as Jt,s as Ut,I as Z,t as it,J as tt,a as J,h as ot,d as L,b as M,g as st,L as B,j as ft,l as dt,e as nt,k as Tt,c as rt,m as $t,R as oe,E as St,T as Et,a0 as ae,W as mt,v as Ft,_ as ue,w as Kt,x as Qt,y as Wt,q as qt,o as Ht,B as Zt}from"../chunks/index-c0d1c2b0.js";import{d as se}from"../chunks/stores-ad474281.js";import{i as le,S as pt,r as te,a as fe,d as kt,t as ce,T as yt,b as zt,c as vt,l as he,L as ge}from"../chunks/DataFlowGraph.svelte_svelte_type_style_lang-4d986b94.js";import"../chunks/index-40ab4bbb.js";class jt extends Map{constructor(e,n=pe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,a]of e)this.set(r,a)}get(e){return super.get(At(this,e))}has(e){return super.has(At(this,e))}set(e,n){return super.set(me(this,e),n)}delete(e){return super.delete(de(this,e))}}function At({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function me({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function de({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function pe(t){return t!==null&&typeof t=="object"?t.valueOf():t}const It=Symbol("implicit");function ee(){var t=new jt,e=[],n=[],r=It;function a(i){let u=t.get(i);if(u===void 0){if(r!==It)return r;t.set(i,u=e.push(i)-1)}return n[u%n.length]}return a.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new jt;for(const u of i)t.has(u)||t.set(u,e.push(u)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return ee(e,n).unknown(r)},le.apply(a,arguments),a}var _e=1e-12;function Dt(t){return((t=Math.exp(t))+1/t)/2}function ye(t){return((t=Math.exp(t))-1/t)/2}function ve(t){return((t=Math.exp(2*t))-1)/(t+1)}var xe=function t(e,n,r){function a(i,u){var c=i[0],p=i[1],l=i[2],v=u[0],y=u[1],f=u[2],m=v-c,b=y-p,d=m*m+b*b,g,s;if(d<_e)s=Math.log(f/l)/e,g=function($){return[c+$*m,p+$*b,l*Math.exp(e*$*s)]};else{var w=Math.sqrt(d),_=(f*f-l*l+r*d)/(2*l*n*w),o=(f*f-l*l-r*d)/(2*f*n*w),k=Math.log(Math.sqrt(_*_+1)-_),T=Math.log(Math.sqrt(o*o+1)-o);s=(T-k)/e,g=function($){var j=$*s,C=Dt(k),D=l/(n*w)*(C*ve(e*j+k)-ye(k));return[c+D*m,p+D*b,l*C/Dt(e*j+k)]}}return g.duration=s*1e3*e/Math.SQRT2,g}return a.rho=function(i){var u=Math.max(.001,+i),c=u*u,p=c*c;return t(u,c,p)},a}(Math.SQRT2,2,4);function Q(t){return typeof t=="string"?new pt([[document.querySelector(t)]],[document.documentElement]):new pt([[t]],te)}function be(t){let e;for(;e=t.sourceEvent;)t=e;return t}function H(t,e){if(t=be(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}function we(t){return typeof t=="string"?new pt([document.querySelectorAll(t)],[document.documentElement]):new pt([fe(t)],te)}const ke={passive:!1},ct={capture:!0,passive:!1};function xt(t){t.stopImmediatePropagation()}function ut(t){t.preventDefault(),t.stopImmediatePropagation()}function ne(t){var e=t.document.documentElement,n=Q(t).on("dragstart.drag",ut,ct);"onselectstart"in e?n.on("selectstart.drag",ut,ct):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function re(t,e){var n=t.document.documentElement,r=Q(t).on("dragstart.drag",null);e&&(r.on("click.drag",ut,ct),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var ht=t=>()=>t;function wt(t,{sourceEvent:e,subject:n,target:r,identifier:a,active:i,x:u,y:c,dx:p,dy:l,dispatch:v}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:p,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:v}})}wt.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function ze(t){return!t.ctrlKey&&!t.button}function Me(){return this.parentNode}function Ne(t,e){return e==null?{x:t.x,y:t.y}:e}function Te(){return navigator.maxTouchPoints||"ontouchstart"in this}function $e(){var t=ze,e=Me,n=Ne,r=Te,a={},i=kt("start","drag","end"),u=0,c,p,l,v,y=0;function f(o){o.on("mousedown.drag",m).filter(r).on("touchstart.drag",g).on("touchmove.drag",s,ke).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(o,k){if(!(v||!t.call(this,o,k))){var T=_(this,e.call(this,o,k),o,k,"mouse");!T||(Q(o.view).on("mousemove.drag",b,ct).on("mouseup.drag",d,ct),ne(o.view),xt(o),l=!1,c=o.clientX,p=o.clientY,T("start",o))}}function b(o){if(ut(o),!l){var k=o.clientX-c,T=o.clientY-p;l=k*k+T*T>y}a.mouse("drag",o)}function d(o){Q(o.view).on("mousemove.drag mouseup.drag",null),re(o.view,l),ut(o),a.mouse("end",o)}function g(o,k){if(!!t.call(this,o,k)){var T=o.changedTouches,$=e.call(this,o,k),j=T.length,C,D;for(C=0;C<j;++C)(D=_(this,$,o,k,T[C].identifier,T[C]))&&(xt(o),D("start",o,T[C]))}}function s(o){var k=o.changedTouches,T=k.length,$,j;for($=0;$<T;++$)(j=a[k[$].identifier])&&(ut(o),j("drag",o,k[$]))}function w(o){var k=o.changedTouches,T=k.length,$,j;for(v&&clearTimeout(v),v=setTimeout(function(){v=null},500),$=0;$<T;++$)(j=a[k[$].identifier])&&(xt(o),j("end",o,k[$]))}function _(o,k,T,$,j,C){var D=i.copy(),X=H(C||T,k),S,P,h;if((h=n.call(o,new wt("beforestart",{sourceEvent:T,target:f,identifier:j,active:u,x:X[0],y:X[1],dx:0,dy:0,dispatch:D}),$))!=null)return S=h.x-X[0]||0,P=h.y-X[1]||0,function z(x,N,E){var A=X,I;switch(x){case"start":a[j]=z,I=u++;break;case"end":delete a[j],--u;case"drag":X=H(E||N,k),I=u;break}D.call(x,o,new wt(x,{sourceEvent:N,subject:h,target:f,identifier:j,active:I,x:X[0]+S,y:X[1]+P,dx:X[0]-A[0],dy:X[1]-A[1],dispatch:D}),$)}}return f.filter=function(o){return arguments.length?(t=typeof o=="function"?o:ht(!!o),f):t},f.container=function(o){return arguments.length?(e=typeof o=="function"?o:ht(o),f):e},f.subject=function(o){return arguments.length?(n=typeof o=="function"?o:ht(o),f):n},f.touchable=function(o){return arguments.length?(r=typeof o=="function"?o:ht(!!o),f):r},f.on=function(){var o=i.on.apply(i,arguments);return o===i?f:o},f.clickDistance=function(o){return arguments.length?(y=(o=+o)*o,f):Math.sqrt(y)},f}function Se(t,e){var n,r=1;t==null&&(t=0),e==null&&(e=0);function a(){var i,u=n.length,c,p=0,l=0;for(i=0;i<u;++i)c=n[i],p+=c.x,l+=c.y;for(p=(p/u-t)*r,l=(l/u-e)*r,i=0;i<u;++i)c=n[i],c.x-=p,c.y-=l}return a.initialize=function(i){n=i},a.x=function(i){return arguments.length?(t=+i,a):t},a.y=function(i){return arguments.length?(e=+i,a):e},a.strength=function(i){return arguments.length?(r=+i,a):r},a}function Ee(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return ie(this.cover(e,n),e,n,t)}function ie(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var a,i=t._root,u={data:r},c=t._x0,p=t._y0,l=t._x1,v=t._y1,y,f,m,b,d,g,s,w;if(!i)return t._root=u,t;for(;i.length;)if((d=e>=(y=(c+l)/2))?c=y:l=y,(g=n>=(f=(p+v)/2))?p=f:v=f,a=i,!(i=i[s=g<<1|d]))return a[s]=u,t;if(m=+t._x.call(null,i.data),b=+t._y.call(null,i.data),e===m&&n===b)return u.next=i,a?a[s]=u:t._root=u,t;do a=a?a[s]=new Array(4):t._root=new Array(4),(d=e>=(y=(c+l)/2))?c=y:l=y,(g=n>=(f=(p+v)/2))?p=f:v=f;while((s=g<<1|d)===(w=(b>=f)<<1|m>=y));return a[w]=i,a[s]=u,t}function je(t){var e,n,r=t.length,a,i,u=new Array(r),c=new Array(r),p=1/0,l=1/0,v=-1/0,y=-1/0;for(n=0;n<r;++n)isNaN(a=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(u[n]=a,c[n]=i,a<p&&(p=a),a>v&&(v=a),i<l&&(l=i),i>y&&(y=i));if(p>v||l>y)return this;for(this.cover(p,l).cover(v,y),n=0;n<r;++n)ie(this,u[n],c[n],t[n]);return this}function Ae(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,a=this._x1,i=this._y1;if(isNaN(n))a=(n=Math.floor(t))+1,i=(r=Math.floor(e))+1;else{for(var u=a-n||1,c=this._root,p,l;n>t||t>=a||r>e||e>=i;)switch(l=(e<r)<<1|t<n,p=new Array(4),p[l]=c,c=p,u*=2,l){case 0:a=n+u,i=r+u;break;case 1:n=a-u,i=r+u;break;case 2:a=n+u,r=i-u;break;case 3:n=a-u,r=i-u;break}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=a,this._y1=i,this}function Ie(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function De(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function R(t,e,n,r,a){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=a}function Ce(t,e,n){var r,a=this._x0,i=this._y0,u,c,p,l,v=this._x1,y=this._y1,f=[],m=this._root,b,d;for(m&&f.push(new R(m,a,i,v,y)),n==null?n=1/0:(a=t-n,i=e-n,v=t+n,y=e+n,n*=n);b=f.pop();)if(!(!(m=b.node)||(u=b.x0)>v||(c=b.y0)>y||(p=b.x1)<a||(l=b.y1)<i))if(m.length){var g=(u+p)/2,s=(c+l)/2;f.push(new R(m[3],g,s,p,l),new R(m[2],u,s,g,l),new R(m[1],g,c,p,s),new R(m[0],u,c,g,s)),(d=(e>=s)<<1|t>=g)&&(b=f[f.length-1],f[f.length-1]=f[f.length-1-d],f[f.length-1-d]=b)}else{var w=t-+this._x.call(null,m.data),_=e-+this._y.call(null,m.data),o=w*w+_*_;if(o<n){var k=Math.sqrt(n=o);a=t-k,i=e-k,v=t+k,y=e+k,r=m.data}}return r}function Ye(t){if(isNaN(v=+this._x.call(null,t))||isNaN(y=+this._y.call(null,t)))return this;var e,n=this._root,r,a,i,u=this._x0,c=this._y0,p=this._x1,l=this._y1,v,y,f,m,b,d,g,s;if(!n)return this;if(n.length)for(;;){if((b=v>=(f=(u+p)/2))?u=f:p=f,(d=y>=(m=(c+l)/2))?c=m:l=m,e=n,!(n=n[g=d<<1|b]))return this;if(!n.length)break;(e[g+1&3]||e[g+2&3]||e[g+3&3])&&(r=e,s=g)}for(;n.data!==t;)if(a=n,!(n=n.next))return this;return(i=n.next)&&delete n.next,a?(i?a.next=i:delete a.next,this):e?(i?e[g]=i:delete e[g],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[s]=n:this._root=n),this):(this._root=i,this)}function Xe(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Pe(){return this._root}function Ve(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function Be(t){var e=[],n,r=this._root,a,i,u,c,p;for(r&&e.push(new R(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,i=n.x0,u=n.y0,c=n.x1,p=n.y1)&&r.length){var l=(i+c)/2,v=(u+p)/2;(a=r[3])&&e.push(new R(a,l,v,c,p)),(a=r[2])&&e.push(new R(a,i,v,l,p)),(a=r[1])&&e.push(new R(a,l,u,c,v)),(a=r[0])&&e.push(new R(a,i,u,l,v))}return this}function Le(t){var e=[],n=[],r;for(this._root&&e.push(new R(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var a=r.node;if(a.length){var i,u=r.x0,c=r.y0,p=r.x1,l=r.y1,v=(u+p)/2,y=(c+l)/2;(i=a[0])&&e.push(new R(i,u,c,v,y)),(i=a[1])&&e.push(new R(i,v,c,p,y)),(i=a[2])&&e.push(new R(i,u,y,v,l)),(i=a[3])&&e.push(new R(i,v,y,p,l))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Oe(t){return t[0]}function Re(t){return arguments.length?(this._x=t,this):this._x}function Ge(t){return t[1]}function Je(t){return arguments.length?(this._y=t,this):this._y}function Mt(t,e,n){var r=new Nt(e==null?Oe:e,n==null?Ge:n,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function Nt(t,e,n,r,a,i){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=a,this._y1=i,this._root=void 0}function Ct(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var G=Mt.prototype=Nt.prototype;G.copy=function(){var t=new Nt(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=Ct(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var a=0;a<4;++a)(r=e.source[a])&&(r.length?n.push({source:r,target:e.target[a]=new Array(4)}):e.target[a]=Ct(r));return t};G.add=Ee;G.addAll=je;G.cover=Ae;G.data=Ie;G.extent=De;G.find=Ce;G.remove=Ye;G.removeAll=Xe;G.root=Pe;G.size=Ve;G.visit=Be;G.visitAfter=Le;G.x=Re;G.y=Je;function at(t){return function(){return t}}function et(t){return(t()-.5)*1e-6}function Ue(t){return t.x+t.vx}function Fe(t){return t.y+t.vy}function Ke(t){var e,n,r,a=1,i=1;typeof t!="function"&&(t=at(t==null?1:+t));function u(){for(var l,v=e.length,y,f,m,b,d,g,s=0;s<i;++s)for(y=Mt(e,Ue,Fe).visitAfter(c),l=0;l<v;++l)f=e[l],d=n[f.index],g=d*d,m=f.x+f.vx,b=f.y+f.vy,y.visit(w);function w(_,o,k,T,$){var j=_.data,C=_.r,D=d+C;if(j){if(j.index>f.index){var X=m-j.x-j.vx,S=b-j.y-j.vy,P=X*X+S*S;P<D*D&&(X===0&&(X=et(r),P+=X*X),S===0&&(S=et(r),P+=S*S),P=(D-(P=Math.sqrt(P)))/P*a,f.vx+=(X*=P)*(D=(C*=C)/(g+C)),f.vy+=(S*=P)*D,j.vx-=X*(D=1-D),j.vy-=S*D)}return}return o>m+D||T<m-D||k>b+D||$<b-D}}function c(l){if(l.data)return l.r=n[l.data.index];for(var v=l.r=0;v<4;++v)l[v]&&l[v].r>l.r&&(l.r=l[v].r)}function p(){if(!!e){var l,v=e.length,y;for(n=new Array(v),l=0;l<v;++l)y=e[l],n[y.index]=+t(y,l,e)}}return u.initialize=function(l,v){e=l,r=v,p()},u.iterations=function(l){return arguments.length?(i=+l,u):i},u.strength=function(l){return arguments.length?(a=+l,u):a},u.radius=function(l){return arguments.length?(t=typeof l=="function"?l:at(+l),p(),u):t},u}function Qe(t){return t.index}function Yt(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function We(t){var e=Qe,n=y,r,a=at(30),i,u,c,p,l,v=1;t==null&&(t=[]);function y(g){return 1/Math.min(c[g.source.index],c[g.target.index])}function f(g){for(var s=0,w=t.length;s<v;++s)for(var _=0,o,k,T,$,j,C,D;_<w;++_)o=t[_],k=o.source,T=o.target,$=T.x+T.vx-k.x-k.vx||et(l),j=T.y+T.vy-k.y-k.vy||et(l),C=Math.sqrt($*$+j*j),C=(C-i[_])/C*g*r[_],$*=C,j*=C,T.vx-=$*(D=p[_]),T.vy-=j*D,k.vx+=$*(D=1-D),k.vy+=j*D}function m(){if(!!u){var g,s=u.length,w=t.length,_=new Map(u.map((k,T)=>[e(k,T,u),k])),o;for(g=0,c=new Array(s);g<w;++g)o=t[g],o.index=g,typeof o.source!="object"&&(o.source=Yt(_,o.source)),typeof o.target!="object"&&(o.target=Yt(_,o.target)),c[o.source.index]=(c[o.source.index]||0)+1,c[o.target.index]=(c[o.target.index]||0)+1;for(g=0,p=new Array(w);g<w;++g)o=t[g],p[g]=c[o.source.index]/(c[o.source.index]+c[o.target.index]);r=new Array(w),b(),i=new Array(w),d()}}function b(){if(!!u)for(var g=0,s=t.length;g<s;++g)r[g]=+n(t[g],g,t)}function d(){if(!!u)for(var g=0,s=t.length;g<s;++g)i[g]=+a(t[g],g,t)}return f.initialize=function(g,s){u=g,l=s,m()},f.links=function(g){return arguments.length?(t=g,m(),f):t},f.id=function(g){return arguments.length?(e=g,f):e},f.iterations=function(g){return arguments.length?(v=+g,f):v},f.strength=function(g){return arguments.length?(n=typeof g=="function"?g:at(+g),b(),f):n},f.distance=function(g){return arguments.length?(a=typeof g=="function"?g:at(+g),d(),f):a},f}const qe=1664525,He=1013904223,Xt=4294967296;function Ze(){let t=1;return()=>(t=(qe*t+He)%Xt)/Xt}function tn(t){return t.x}function en(t){return t.y}var nn=10,rn=Math.PI*(3-Math.sqrt(5));function on(t){var e,n=1,r=.001,a=1-Math.pow(r,1/300),i=0,u=.6,c=new Map,p=ce(y),l=kt("tick","end"),v=Ze();t==null&&(t=[]);function y(){f(),l.call("tick",e),n<r&&(p.stop(),l.call("end",e))}function f(d){var g,s=t.length,w;d===void 0&&(d=1);for(var _=0;_<d;++_)for(n+=(i-n)*a,c.forEach(function(o){o(n)}),g=0;g<s;++g)w=t[g],w.fx==null?w.x+=w.vx*=u:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=u:(w.y=w.fy,w.vy=0);return e}function m(){for(var d=0,g=t.length,s;d<g;++d){if(s=t[d],s.index=d,s.fx!=null&&(s.x=s.fx),s.fy!=null&&(s.y=s.fy),isNaN(s.x)||isNaN(s.y)){var w=nn*Math.sqrt(.5+d),_=d*rn;s.x=w*Math.cos(_),s.y=w*Math.sin(_)}(isNaN(s.vx)||isNaN(s.vy))&&(s.vx=s.vy=0)}}function b(d){return d.initialize&&d.initialize(t,v),d}return m(),e={tick:f,restart:function(){return p.restart(y),e},stop:function(){return p.stop(),e},nodes:function(d){return arguments.length?(t=d,m(),c.forEach(b),e):t},alpha:function(d){return arguments.length?(n=+d,e):n},alphaMin:function(d){return arguments.length?(r=+d,e):r},alphaDecay:function(d){return arguments.length?(a=+d,e):+a},alphaTarget:function(d){return arguments.length?(i=+d,e):i},velocityDecay:function(d){return arguments.length?(u=1-d,e):1-u},randomSource:function(d){return arguments.length?(v=d,c.forEach(b),e):v},force:function(d,g){return arguments.length>1?(g==null?c.delete(d):c.set(d,b(g)),e):c.get(d)},find:function(d,g,s){var w=0,_=t.length,o,k,T,$,j;for(s==null?s=1/0:s*=s,w=0;w<_;++w)$=t[w],o=d-$.x,k=g-$.y,T=o*o+k*k,T<s&&(j=$,s=T);return j},on:function(d,g){return arguments.length>1?(l.on(d,g),e):l.on(d)}}}function an(){var t,e,n,r,a=at(-30),i,u=1,c=1/0,p=.81;function l(m){var b,d=t.length,g=Mt(t,tn,en).visitAfter(y);for(r=m,b=0;b<d;++b)e=t[b],g.visit(f)}function v(){if(!!t){var m,b=t.length,d;for(i=new Array(b),m=0;m<b;++m)d=t[m],i[d.index]=+a(d,m,t)}}function y(m){var b=0,d,g,s=0,w,_,o;if(m.length){for(w=_=o=0;o<4;++o)(d=m[o])&&(g=Math.abs(d.value))&&(b+=d.value,s+=g,w+=g*d.x,_+=g*d.y);m.x=w/s,m.y=_/s}else{d=m,d.x=d.data.x,d.y=d.data.y;do b+=i[d.data.index];while(d=d.next)}m.value=b}function f(m,b,d,g){if(!m.value)return!0;var s=m.x-e.x,w=m.y-e.y,_=g-b,o=s*s+w*w;if(_*_/p<o)return o<c&&(s===0&&(s=et(n),o+=s*s),w===0&&(w=et(n),o+=w*w),o<u&&(o=Math.sqrt(u*o)),e.vx+=s*m.value*r/o,e.vy+=w*m.value*r/o),!0;if(m.length||o>=c)return;(m.data!==e||m.next)&&(s===0&&(s=et(n),o+=s*s),w===0&&(w=et(n),o+=w*w),o<u&&(o=Math.sqrt(u*o)));do m.data!==e&&(_=i[m.data.index]*r/o,e.vx+=s*_,e.vy+=w*_);while(m=m.next)}return l.initialize=function(m,b){t=m,n=b,v()},l.strength=function(m){return arguments.length?(a=typeof m=="function"?m:at(+m),v(),l):a},l.distanceMin=function(m){return arguments.length?(u=m*m,l):Math.sqrt(u)},l.distanceMax=function(m){return arguments.length?(c=m*m,l):Math.sqrt(c)},l.theta=function(m){return arguments.length?(p=m*m,l):Math.sqrt(p)},l}function un(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}var sn=un("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),gt=t=>()=>t;function ln(t,{sourceEvent:e,target:n,transform:r,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function bt(t){t.stopImmediatePropagation()}function lt(t){t.preventDefault(),t.stopImmediatePropagation()}function fn(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function cn(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Pt(){return this.__zoom||zt}function hn(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function gn(){return navigator.maxTouchPoints||"ontouchstart"in this}function mn(t,e,n){var r=t.invertX(e[0][0])-n[0][0],a=t.invertX(e[1][0])-n[1][0],i=t.invertY(e[0][1])-n[0][1],u=t.invertY(e[1][1])-n[1][1];return t.translate(a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a),u>i?(i+u)/2:Math.min(0,i)||Math.max(0,u))}function dn(){var t=fn,e=cn,n=mn,r=hn,a=gn,i=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,p=xe,l=kt("start","zoom","end"),v,y,f,m=500,b=150,d=0,g=10;function s(h){h.property("__zoom",Pt).on("wheel.zoom",j,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",D).filter(a).on("touchstart.zoom",X).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}s.transform=function(h,z,x,N){var E=h.selection?h.selection():h;E.property("__zoom",Pt),h!==E?k(h,z,x,N):E.interrupt().each(function(){T(this,arguments).event(N).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},s.scaleBy=function(h,z,x,N){s.scaleTo(h,function(){var E=this.__zoom.k,A=typeof z=="function"?z.apply(this,arguments):z;return E*A},x,N)},s.scaleTo=function(h,z,x,N){s.transform(h,function(){var E=e.apply(this,arguments),A=this.__zoom,I=x==null?o(E):typeof x=="function"?x.apply(this,arguments):x,Y=A.invert(I),V=typeof z=="function"?z.apply(this,arguments):z;return n(_(w(A,V),I,Y),E,u)},x,N)},s.translateBy=function(h,z,x,N){s.transform(h,function(){return n(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof x=="function"?x.apply(this,arguments):x),e.apply(this,arguments),u)},null,N)},s.translateTo=function(h,z,x,N,E){s.transform(h,function(){var A=e.apply(this,arguments),I=this.__zoom,Y=N==null?o(A):typeof N=="function"?N.apply(this,arguments):N;return n(zt.translate(Y[0],Y[1]).scale(I.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof x=="function"?-x.apply(this,arguments):-x),A,u)},N,E)};function w(h,z){return z=Math.max(i[0],Math.min(i[1],z)),z===h.k?h:new yt(z,h.x,h.y)}function _(h,z,x){var N=z[0]-x[0]*h.k,E=z[1]-x[1]*h.k;return N===h.x&&E===h.y?h:new yt(h.k,N,E)}function o(h){return[(+h[0][0]+ +h[1][0])/2,(+h[0][1]+ +h[1][1])/2]}function k(h,z,x,N){h.on("start.zoom",function(){T(this,arguments).event(N).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(N).end()}).tween("zoom",function(){var E=this,A=arguments,I=T(E,A).event(N),Y=e.apply(E,A),V=x==null?o(Y):typeof x=="function"?x.apply(E,A):x,K=Math.max(Y[1][0]-Y[0][0],Y[1][1]-Y[0][1]),O=E.__zoom,U=typeof z=="function"?z.apply(E,A):z,W=p(O.invert(V).concat(K/O.k),U.invert(V).concat(K/U.k));return function(F){if(F===1)F=U;else{var q=W(F),_t=K/q[2];F=new yt(_t,V[0]-q[0]*_t,V[1]-q[1]*_t)}I.zoom(null,F)}})}function T(h,z,x){return!x&&h.__zooming||new $(h,z)}function $(h,z){this.that=h,this.args=z,this.active=0,this.sourceEvent=null,this.extent=e.apply(h,z),this.taps=0}$.prototype={event:function(h){return h&&(this.sourceEvent=h),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(h,z){return this.mouse&&h!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&h!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&h!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(h){var z=Q(this.that).datum();l.call(h,this.that,new ln(h,{sourceEvent:this.sourceEvent,target:s,type:h,transform:this.that.__zoom,dispatch:l}),z)}};function j(h,...z){if(!t.apply(this,arguments))return;var x=T(this,z).event(h),N=this.__zoom,E=Math.max(i[0],Math.min(i[1],N.k*Math.pow(2,r.apply(this,arguments)))),A=H(h);if(x.wheel)(x.mouse[0][0]!==A[0]||x.mouse[0][1]!==A[1])&&(x.mouse[1]=N.invert(x.mouse[0]=A)),clearTimeout(x.wheel);else{if(N.k===E)return;x.mouse=[A,N.invert(A)],vt(this),x.start()}lt(h),x.wheel=setTimeout(I,b),x.zoom("mouse",n(_(w(N,E),x.mouse[0],x.mouse[1]),x.extent,u));function I(){x.wheel=null,x.end()}}function C(h,...z){if(f||!t.apply(this,arguments))return;var x=h.currentTarget,N=T(this,z,!0).event(h),E=Q(h.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",K,!0),A=H(h,x),I=h.clientX,Y=h.clientY;ne(h.view),bt(h),N.mouse=[A,this.__zoom.invert(A)],vt(this),N.start();function V(O){if(lt(O),!N.moved){var U=O.clientX-I,W=O.clientY-Y;N.moved=U*U+W*W>d}N.event(O).zoom("mouse",n(_(N.that.__zoom,N.mouse[0]=H(O,x),N.mouse[1]),N.extent,u))}function K(O){E.on("mousemove.zoom mouseup.zoom",null),re(O.view,N.moved),lt(O),N.event(O).end()}}function D(h,...z){if(!!t.apply(this,arguments)){var x=this.__zoom,N=H(h.changedTouches?h.changedTouches[0]:h,this),E=x.invert(N),A=x.k*(h.shiftKey?.5:2),I=n(_(w(x,A),N,E),e.apply(this,z),u);lt(h),c>0?Q(this).transition().duration(c).call(k,I,N,h):Q(this).call(s.transform,I,N,h)}}function X(h,...z){if(!!t.apply(this,arguments)){var x=h.touches,N=x.length,E=T(this,z,h.changedTouches.length===N).event(h),A,I,Y,V;for(bt(h),I=0;I<N;++I)Y=x[I],V=H(Y,this),V=[V,this.__zoom.invert(V),Y.identifier],E.touch0?!E.touch1&&E.touch0[2]!==V[2]&&(E.touch1=V,E.taps=0):(E.touch0=V,A=!0,E.taps=1+!!v);v&&(v=clearTimeout(v)),A&&(E.taps<2&&(y=V[0],v=setTimeout(function(){v=null},m)),vt(this),E.start())}}function S(h,...z){if(!!this.__zooming){var x=T(this,z).event(h),N=h.changedTouches,E=N.length,A,I,Y,V;for(lt(h),A=0;A<E;++A)I=N[A],Y=H(I,this),x.touch0&&x.touch0[2]===I.identifier?x.touch0[0]=Y:x.touch1&&x.touch1[2]===I.identifier&&(x.touch1[0]=Y);if(I=x.that.__zoom,x.touch1){var K=x.touch0[0],O=x.touch0[1],U=x.touch1[0],W=x.touch1[1],F=(F=U[0]-K[0])*F+(F=U[1]-K[1])*F,q=(q=W[0]-O[0])*q+(q=W[1]-O[1])*q;I=w(I,Math.sqrt(F/q)),Y=[(K[0]+U[0])/2,(K[1]+U[1])/2],V=[(O[0]+W[0])/2,(O[1]+W[1])/2]}else if(x.touch0)Y=x.touch0[0],V=x.touch0[1];else return;x.zoom("touch",n(_(I,Y,V),x.extent,u))}}function P(h,...z){if(!!this.__zooming){var x=T(this,z).event(h),N=h.changedTouches,E=N.length,A,I;for(bt(h),f&&clearTimeout(f),f=setTimeout(function(){f=null},m),A=0;A<E;++A)I=N[A],x.touch0&&x.touch0[2]===I.identifier?delete x.touch0:x.touch1&&x.touch1[2]===I.identifier&&delete x.touch1;if(x.touch1&&!x.touch0&&(x.touch0=x.touch1,delete x.touch1),x.touch0)x.touch0[1]=this.__zoom.invert(x.touch0[0]);else if(x.end(),x.taps===2&&(I=H(I,this),Math.hypot(y[0]-I[0],y[1]-I[1])<g)){var Y=Q(this).on("dblclick.zoom");Y&&Y.apply(this,arguments)}}}return s.wheelDelta=function(h){return arguments.length?(r=typeof h=="function"?h:gt(+h),s):r},s.filter=function(h){return arguments.length?(t=typeof h=="function"?h:gt(!!h),s):t},s.touchable=function(h){return arguments.length?(a=typeof h=="function"?h:gt(!!h),s):a},s.extent=function(h){return arguments.length?(e=typeof h=="function"?h:gt([[+h[0][0],+h[0][1]],[+h[1][0],+h[1][1]]]),s):e},s.scaleExtent=function(h){return arguments.length?(i[0]=+h[0],i[1]=+h[1],s):[i[0],i[1]]},s.translateExtent=function(h){return arguments.length?(u[0][0]=+h[0][0],u[1][0]=+h[1][0],u[0][1]=+h[0][1],u[1][1]=+h[1][1],s):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},s.constrain=function(h){return arguments.length?(n=h,s):n},s.duration=function(h){return arguments.length?(c=+h,s):c},s.interpolate=function(h){return arguments.length?(p=h,s):p},s.on=function(){var h=l.on.apply(l,arguments);return h===l?s:h},s.clickDistance=function(h){return arguments.length?(d=(h=+h)*h,s):Math.sqrt(d)},s.tapDistance=function(h){return arguments.length?(g=+h,s):g},s}function Vt(t,e,n){const r=t.slice();return r[26]=e[n],r}function Bt(t,e,n){const r=t.slice();return r[29]=e[n],r}function Lt(t){let e,n,r,a=t[29].source.id+"",i,u,c,p,l,v,y,f,m=t[29].label+"",b,d,g,s,w,_;return{c(){e=Z("g"),n=Z("line"),r=Z("title"),i=it(a),f=Z("text"),b=it(m),this.h()},l(o){e=tt(o,"g",{stroke:!0,"stroke-opacity":!0});var k=J(e);n=tt(k,"line",{x1:!0,y1:!0,x2:!0,y2:!0,"marker-end":!0,transform:!0});var T=J(n);r=tt(T,"title",{});var $=J(r);i=ot($,a),$.forEach(L),T.forEach(L),f=tt(k,"text",{class:!0,transform:!0,x:!0,y:!0,dx:!0,dy:!0});var j=J(f);b=ot(j,m),j.forEach(L),k.forEach(L),this.h()},h(){M(n,"x1",u=t[29].source.x),M(n,"y1",c=t[29].source.y),M(n,"x2",p=t[29].target.x),M(n,"y2",l=t[29].target.y),M(n,"marker-end",v=t[29].ignore?"":"url(#end)"),M(n,"transform",y="translate("+t[4].x+" "+t[4].y+") scale("+t[4].k+" "+t[4].k+")"),M(f,"class",d=t[29].ignore?"hidden":""),M(f,"transform",g="translate("+t[4].x+" "+t[4].y+") scale("+t[4].k+" "+t[4].k+")"),M(f,"x",s=(t[29].source.x+t[29].target.x)/2),M(f,"y",w=(t[29].source.y+t[29].target.y)/2),M(f,"dx","12"),M(f,"dy","0.35em"),M(e,"stroke",_=t[29].ignore?"":"#999"),M(e,"stroke-opacity","0.6")},m(o,k){st(o,e,k),B(e,n),B(n,r),B(r,i),B(e,f),B(f,b)},p(o,k){k[0]&1&&a!==(a=o[29].source.id+"")&&ft(i,a),k[0]&1&&u!==(u=o[29].source.x)&&M(n,"x1",u),k[0]&1&&c!==(c=o[29].source.y)&&M(n,"y1",c),k[0]&1&&p!==(p=o[29].target.x)&&M(n,"x2",p),k[0]&1&&l!==(l=o[29].target.y)&&M(n,"y2",l),k[0]&1&&v!==(v=o[29].ignore?"":"url(#end)")&&M(n,"marker-end",v),k[0]&16&&y!==(y="translate("+o[4].x+" "+o[4].y+") scale("+o[4].k+" "+o[4].k+")")&&M(n,"transform",y),k[0]&1&&m!==(m=o[29].label+"")&&ft(b,m),k[0]&1&&d!==(d=o[29].ignore?"hidden":"")&&M(f,"class",d),k[0]&16&&g!==(g="translate("+o[4].x+" "+o[4].y+") scale("+o[4].k+" "+o[4].k+")")&&M(f,"transform",g),k[0]&1&&s!==(s=(o[29].source.x+o[29].target.x)/2)&&M(f,"x",s),k[0]&1&&w!==(w=(o[29].source.y+o[29].target.y)/2)&&M(f,"y",w),k[0]&1&&_!==(_=o[29].ignore?"":"#999")&&M(e,"stroke",_)},d(o){o&&L(e)}}}function Ot(t){let e,n=t[26].federate+"",r,a,i=t[26].name+"",u,c,p,l,v;return{c(){e=Z("text"),r=it(n),a=it(" - "),u=it(i),this.h()},l(y){e=tt(y,"text",{class:!0,transform:!0,x:!0,y:!0,dx:!0,dy:!0});var f=J(e);r=ot(f,n),a=ot(f," - "),u=ot(f,i),f.forEach(L),this.h()},h(){M(e,"class",c="label "+(t[26].name=="__broker__"?"hidden":"")),M(e,"transform",p="translate("+t[4].x+" "+t[4].y+") scale("+t[4].k+" "+t[4].k+")"),M(e,"x",l=t[26].x),M(e,"y",v=t[26].y),M(e,"dx","12"),M(e,"dy",".35em")},m(y,f){st(y,e,f),B(e,r),B(e,a),B(e,u)},p(y,f){f[0]&2&&n!==(n=y[26].federate+"")&&ft(r,n),f[0]&2&&i!==(i=y[26].name+"")&&ft(u,i),f[0]&2&&c!==(c="label "+(y[26].name=="__broker__"?"hidden":""))&&M(e,"class",c),f[0]&16&&p!==(p="translate("+y[4].x+" "+y[4].y+") scale("+y[4].k+" "+y[4].k+")")&&M(e,"transform",p),f[0]&2&&l!==(l=y[26].x)&&M(e,"x",l),f[0]&2&&v!==(v=y[26].y)&&M(e,"y",v)},d(y){y&&L(e)}}}function Rt(t){let e,n,r=t[26].id+"",a,i,u,c,p,l,v,y=t[2]&&Ot(t);return{c(){e=Z("circle"),n=Z("title"),a=it(r),y&&y.c(),v=dt(),this.h()},l(f){e=tt(f,"circle",{class:!0,r:!0,fill:!0,cx:!0,cy:!0,transform:!0});var m=J(e);n=tt(m,"title",{});var b=J(n);a=ot(b,r),b.forEach(L),m.forEach(L),y&&y.l(f),v=dt(),this.h()},h(){M(e,"class","node svelte-1ji2mxg"),M(e,"r",i=t[26].name=="__broker__"?0:5),M(e,"fill",u=t[10](t[26].group)),M(e,"cx",c=t[26].x),M(e,"cy",p=t[26].y),M(e,"transform",l="translate("+t[4].x+" "+t[4].y+") scale("+t[4].k+" "+t[4].k+")")},m(f,m){st(f,e,m),B(e,n),B(n,a),y&&y.m(f,m),st(f,v,m)},p(f,m){m[0]&2&&r!==(r=f[26].id+"")&&ft(a,r),m[0]&2&&i!==(i=f[26].name=="__broker__"?0:5)&&M(e,"r",i),m[0]&2&&u!==(u=f[10](f[26].group))&&M(e,"fill",u),m[0]&2&&c!==(c=f[26].x)&&M(e,"cx",c),m[0]&2&&p!==(p=f[26].y)&&M(e,"cy",p),m[0]&16&&l!==(l="translate("+f[4].x+" "+f[4].y+") scale("+f[4].k+" "+f[4].k+")")&&M(e,"transform",l),f[2]?y?y.p(f,m):(y=Ot(f),y.c(),y.m(v.parentNode,v)):y&&(y.d(1),y=null)},d(f){f&&L(e),y&&y.d(f),f&&L(v)}}}function pn(t){let e,n,r,a,i,u,c,p,l,v,y,f,m=t[0],b=[];for(let s=0;s<m.length;s+=1)b[s]=Lt(Bt(t,m,s));let d=t[1],g=[];for(let s=0;s<d.length;s+=1)g[s]=Rt(Vt(t,d,s));return{c(){e=nt("div"),n=nt("div"),r=nt("div"),a=nt("input"),i=Tt(),u=nt("label"),c=it("Show labels"),p=Tt(),l=Z("svg");for(let s=0;s<b.length;s+=1)b[s].c();v=dt();for(let s=0;s<g.length;s+=1)g[s].c();this.h()},l(s){e=rt(s,"DIV",{class:!0});var w=J(e);n=rt(w,"DIV",{class:!0});var _=J(n);r=rt(_,"DIV",{class:!0});var o=J(r);a=rt(o,"INPUT",{type:!0}),i=$t(o),u=rt(o,"LABEL",{class:!0,for:!0});var k=J(u);c=ot(k,"Show labels"),k.forEach(L),o.forEach(L),_.forEach(L),p=$t(w),l=tt(w,"svg",{class:!0,width:!0,height:!0});var T=J(l);for(let $=0;$<b.length;$+=1)b[$].l(T);v=dt();for(let $=0;$<g.length;$+=1)g[$].l(T);T.forEach(L),w.forEach(L),this.h()},h(){M(a,"type","checkbox"),M(u,"class","form-check-label inline-block text-gray-800"),M(u,"for","flexCheckChecked"),M(r,"class","form-check"),M(n,"class","flex justify-center"),M(l,"class","grow svelte-1ji2mxg"),M(l,"width",t[8]),M(l,"height",t[9]/1.15),M(e,"class","flex flex-col")},m(s,w){st(s,e,w),B(e,n),B(n,r),B(r,a),a.checked=t[2],B(r,i),B(r,u),B(u,c),B(e,p),B(e,l);for(let _=0;_<b.length;_+=1)b[_].m(l,null);B(l,v);for(let _=0;_<g.length;_+=1)g[_].m(l,null);t[16](l),y||(f=oe(a,"change",t[15]),y=!0)},p(s,w){if(w[0]&4&&(a.checked=s[2]),w[0]&17){m=s[0];let _;for(_=0;_<m.length;_+=1){const o=Bt(s,m,_);b[_]?b[_].p(o,w):(b[_]=Lt(o),b[_].c(),b[_].m(l,v))}for(;_<b.length;_+=1)b[_].d(1);b.length=m.length}if(w[0]&1046){d=s[1];let _;for(_=0;_<d.length;_+=1){const o=Vt(s,d,_);g[_]?g[_].p(o,w):(g[_]=Rt(o),g[_].c(),g[_].m(l,null))}for(;_<g.length;_+=1)g[_].d(1);g.length=d.length}},i:St,o:St,d(s){s&&L(e),Et(b,s),Et(g,s),t[16](null),y=!1,f()}}}const _n=5;function yn(t,e,n){let r,a,i,u,c,p,l;const{data:v,width:y,height:f}=ae("LayerCake");mt(t,v,S=>n(14,l=S)),mt(t,y,S=>n(13,p=S)),mt(t,f,S=>n(12,c=S));let m=!0,b={zoom:dn,zoomIdentity:zt,scaleLinear:he,scaleOrdinal:ee,schemeCategory10:sn,select:Q,selectAll:we,drag:$e,forceSimulation:on,forceLink:We,forceManyBody:an,forceCenter:Se,forceCollide:Ke},d,g=p,s=c;const w=b.scaleOrdinal(b.schemeCategory10);let _=b.zoomIdentity;Ft(()=>{b.select(d).append("svg:defs").selectAll("marker").data(["end"]).enter().append("svg:marker").attr("id",String).attr("viewBox","0 -5 10 10").attr("refX",15).attr("refY",-1.5).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5"),b.select(d).call(b.drag().container(d).subject(T).on("start",$).on("drag",j).on("end",C)).call(b.zoom().scaleExtent([1/10,8]).on("zoom",k))});function o(){n(1,i=[...i]),n(0,a=[...a])}function k(S){n(4,_=S.transform),o()}function T(S){const P=u.find(_.invertX(S.x),_.invertY(S.y),_n);return P&&(P.x=_.applyX(P.x),P.y=_.applyY(P.y)),P}function $(S){S.active||u.alphaTarget(.3).restart(),S.subject.fx=_.invertX(S.subject.x),S.subject.fy=_.invertY(S.subject.y)}function j(S){S.subject.fx=_.invertX(S.x),S.subject.fy=_.invertY(S.y)}function C(S){S.active||u.alphaTarget(0),S.subject.fx=null,S.subject.fy=null}function D(){m=this.checked,n(2,m)}function X(S){ue[S?"unshift":"push"](()=>{d=S,n(3,d)})}return t.$$.update=()=>{t.$$.dirty[0]&16384&&n(11,r=l.length==0?{nodes:[],links:[]}:l),t.$$.dirty[0]&2048&&n(0,a=r.links.map(S=>Object.create(S))),t.$$.dirty[0]&2048&&n(1,i=r.nodes.map(S=>Object.create(S))),t.$$.dirty[0]&12291&&(u=b.forceSimulation(i).force("link",b.forceLink(a).id(S=>S.name).distance(S=>S.ignore?300:30)).force("collision",b.forceCollide().radius(S=>25)).force("charge",b.forceManyBody()).force("center",b.forceCenter(p/2,c/2)).on("tick",o))},[a,i,m,d,_,v,y,f,g,s,w,r,c,p,l,D,X]}class vn extends Gt{constructor(e){super(),Jt(this,e,yn,pn,Ut,{},null,[-1,-1])}}function xn(t){let e,n;return e=new vn({}),{c(){Kt(e.$$.fragment)},l(r){Qt(e.$$.fragment,r)},m(r,a){Wt(e,r,a),n=!0},i(r){n||(qt(e.$$.fragment,r),n=!0)},o(r){Ht(e.$$.fragment,r),n=!1},d(r){Zt(e,r)}}}function bn(t){let e,n,r,a;return r=new ge({props:{data:t[0],$$slots:{default:[xn]},$$scope:{ctx:t}}}),{c(){e=nt("div"),n=nt("div"),Kt(r.$$.fragment),this.h()},l(i){e=rt(i,"DIV",{class:!0});var u=J(e);n=rt(u,"DIV",{class:!0});var c=J(n);Qt(r.$$.fragment,c),c.forEach(L),u.forEach(L),this.h()},h(){M(n,"class","grow grid grid-areas-layout justify-items-stretch my-auto"),M(e,"class","flex flex-col h-full")},m(i,u){st(i,e,u),B(e,n),Wt(r,n,null),a=!0},p(i,[u]){const c={};u&1&&(c.data=i[0]),u&4&&(c.$$scope={dirty:u,ctx:i}),r.$set(c)},i(i){a||(qt(r.$$.fragment,i),a=!0)},o(i){Ht(r.$$.fragment,i),a=!1},d(i){i&&L(e),Zt(r)}}}function wn(t,e){let n=[],r=[],a={};n.push({name:"__broker__",group:0});for(const i of e.cores)for(const u of i.federates){u.publications===void 0&&(u.publications=[]);for(const c of u.publications){n.push({name:`${c.federate}-${c.handle}`,federate:u.attributes.name,group:1}),c.targets===void 0&&(c.targets=[]),a[`${c.federate}-${c.handle}`]=c.key;for(const p of c.targets)r.push({source:`${c.federate}-${c.handle}`,target:`${p.federate}-${p.handle}`,label:a[`${c.federate}-${c.handle}`],ignore:!1}),r.push({source:`${c.federate}-${c.handle}`,target:"__broker__",ignore:!0}),r.push({source:`${p.federate}-${p.handle}`,target:"__broker__",ignore:!0})}}for(const i of e.cores)for(const u of i.federates){u.inputs===void 0&&(u.inputs=[]);for(const c of u.inputs){n.push({name:`${c.federate}-${c.handle}`,federate:u.attributes.name,group:2}),c.sources===void 0&&(c.sources=[]);for(const p of c.sources)r.push({source:`${p.federate}-${p.handle}`,target:`${c.federate}-${c.handle}`,label:a[`${p.federate}-${p.handle}`],ignore:!1}),r.push({source:`${c.federate}-${c.handle}`,target:"__broker__",ignore:!0}),r.push({source:`${p.federate}-${p.handle}`,target:"__broker__",ignore:!0})}}return n=Array.from(new Set(n.map(JSON.stringify))).map(JSON.parse),r=Array.from(new Set(r.map(JSON.stringify))).map(JSON.parse),{nodes:n,links:r}}function kn(t,e,n){let r;mt(t,se,i=>n(1,r=i));let a;return Ft(()=>{n(0,a=wn(r.graphs.federate,r.graphs.data))}),[a]}class $n extends Gt{constructor(e){super(),Jt(this,e,kn,bn,Ut,{})}}export{$n as default};
