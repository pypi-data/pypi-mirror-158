import{d as D,u as w,a3 as C,ac as k,f as x,h as e,o as p,g as i,w as _,l as g,aq as A,ak as I,al as N,am as P,i as f,ab as b,a2 as v,y as R}from"./index.81b118c5.js";import{u as U}from"./useRouteParam.14d7a074.js";const E=D({__name:"BlockEdit",async setup(V){let o,u;const l=w(),m=U("blockDocumentId"),a=([o,u]=C(()=>b.getBlockDocument(m.value)),o=await o,u(),o),{blockSchema:r}=a,s=k(a.data),c=k(a.name);function h(){b.updateBlockDocument(a.id,{name:c.value,data:s.value}).then(()=>{v("Block updated successfully","success"),l.push(R.block(m.value))}).catch(d=>{v("Failed to update block","error"),console.error(d)})}function y(){l.back()}return(d,t)=>{const B=x("p-layout-default");return e(a)?(p(),i(B,{key:0,class:"block-edit"},{header:_(()=>[g(e(A),{"block-document":e(a)},null,8,["block-document"])]),default:_(()=>[e(r)?(p(),i(e(I),N({key:0,data:s.value,"onUpdate:data":t[0]||(t[0]=n=>s.value=n),name:c.value,"onUpdate:name":t[1]||(t[1]=n=>c.value=n),"block-schema":e(r)},P({submit:h,cancel:y})),null,16,["data","name","block-schema"])):f("",!0)]),_:1})):f("",!0)}}});export{E as default};
