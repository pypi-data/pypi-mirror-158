(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[14],{283:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return u})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return d}));var n=a(27),r=a.n(n),o=a(41),l=a(28),c=a.n(l),i=function(){var e=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("resource/cluster");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(e){return c.a.get("resource/job/".concat(e))},s=function(e){return c.a.get("resource/node/".concat(e))},d=function(){return c.a.get("namespaces/resources")}},285:function(e,t,a){"use strict";var n=a(746),r=a(22),o=a(0),l=a.n(o);t.a=l.a.memo((function(e){var t=Object(r.a)(),a=e.resource,o=e.title;return l.a.createElement("div",{style:{textAlign:"center"}}," ",l.a.createElement(n.a,{label:{autoRotate:!1,type:"inner",content:function(e){var t=e.type,a=e.percent,n=e.value;return"".concat(t,"\n").concat(n,"\n").concat((100*a).toFixed(2),"%")},style:{fonrSize:12,fill:t.palette.text.primary,stroke:t.palette.background.paper,textAlign:"center",lineWidth:2},layout:{type:"fixedOverlap"}},color:[t.palette.primary.light,t.palette.secondary.main],width:100,height:120,style:{margin:"0 auto"},legend:!1,angleField:"value",colorField:"type",data:[{type:"avalable",value:a.available},{type:"used",value:a.total-a.available}],pieStyle:{stroke:t.palette.background.paper}}),l.a.createElement("h5",null,o))}),(function(e,t){return JSON.stringify(e.resource)===JSON.stringify(t.resource)}))},359:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(100),r=a(102),o=a(63),l=a(101);function c(e){return Object(n.a)(e)||Object(r.a)(e)||Object(o.a)(e)||Object(l.a)()}},744:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a(91),o=a(93),l=a(126),c=a(1),i=a(359),u=a(2),s=a(0),d=a.n(s),m=(a(62),a(4),a(3)),f=a(181),p=a(5),b=a(56),v=a(36),g=a(22),E=a(9),h=s.forwardRef((function(e,t){var a=e.children,r=e.classes,o=e.className,l=e.collapsedHeight,i=void 0===l?"0px":l,d=e.component,p=void 0===d?"div":d,h=e.disableStrictModeCompat,O=void 0!==h&&h,j=e.in,y=e.onEnter,x=e.onEntered,N=e.onEntering,R=e.onExit,C=e.onExited,w=e.onExiting,k=e.style,S=e.timeout,M=void 0===S?b.b.standard:S,I=e.TransitionComponent,A=void 0===I?f.a:I,F=Object(u.a)(e,["children","classes","className","collapsedHeight","component","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),L=Object(g.a)(),U=s.useRef(),H=s.useRef(null),B=s.useRef(),P="number"==typeof i?"".concat(i,"px"):i;s.useEffect((function(){return function(){clearTimeout(U.current)}}),[]);var T=L.unstable_strictMode&&!O,D=s.useRef(null),V=Object(E.a)(t,T?D:void 0),$=function(e){return function(t,a){if(e){var r=T?[D.current,t]:[t,a],o=Object(n.a)(r,2),l=o[0],c=o[1];void 0===c?e(l):e(l,c)}}},_=$((function(e,t){e.style.height=P,y&&y(e,t)})),z=$((function(e,t){var a=H.current?H.current.clientHeight:0,n=Object(v.a)({style:k,timeout:M},{mode:"enter"}).duration;if("auto"===M){var r=L.transitions.getAutoHeightDuration(a);e.style.transitionDuration="".concat(r,"ms"),B.current=r}else e.style.transitionDuration="string"==typeof n?n:"".concat(n,"ms");e.style.height="".concat(a,"px"),N&&N(e,t)})),J=$((function(e,t){e.style.height="auto",x&&x(e,t)})),q=$((function(e){var t=H.current?H.current.clientHeight:0;e.style.height="".concat(t,"px"),R&&R(e)})),W=$(C),G=$((function(e){var t=H.current?H.current.clientHeight:0,a=Object(v.a)({style:k,timeout:M},{mode:"exit"}).duration;if("auto"===M){var n=L.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(n,"ms"),B.current=n}else e.style.transitionDuration="string"==typeof a?a:"".concat(a,"ms");e.style.height=P,w&&w(e)}));return s.createElement(A,Object(c.a)({in:j,onEnter:_,onEntered:J,onEntering:z,onExit:q,onExited:W,onExiting:G,addEndListener:function(e,t){var a=T?e:t;"auto"===M&&(U.current=setTimeout(a,B.current||0))},nodeRef:T?D:void 0,timeout:"auto"===M?null:M},F),(function(e,t){return s.createElement(p,Object(c.a)({className:Object(m.a)(r.container,o,{entered:r.entered,exited:!j&&"0px"===P&&r.hidden}[e]),style:Object(c.a)({minHeight:P},k),ref:V},t),s.createElement("div",{className:r.wrapper,ref:H},s.createElement("div",{className:r.wrapperInner},a)))}))}));h.muiSupportAuto=!0;var O=Object(p.a)((function(e){return{container:{height:0,overflow:"hidden",transition:e.transitions.create("height")},entered:{height:"auto",overflow:"visible"},hidden:{visibility:"hidden"},wrapper:{display:"flex"},wrapperInner:{width:"100%"}}}),{name:"MuiCollapse"})(h),j=a(170);var y=s.createContext({}),x=a(47),N=s.forwardRef((function(e,t){var a=e.children,r=e.classes,o=e.className,l=e.defaultExpanded,d=void 0!==l&&l,f=e.disabled,p=void 0!==f&&f,b=e.expanded,v=e.onChange,g=e.square,E=void 0!==g&&g,h=e.TransitionComponent,N=void 0===h?O:h,R=e.TransitionProps,C=Object(u.a)(e,["children","classes","className","defaultExpanded","disabled","expanded","onChange","square","TransitionComponent","TransitionProps"]),w=Object(x.a)({controlled:b,default:d,name:"Accordion",state:"expanded"}),k=Object(n.a)(w,2),S=k[0],M=k[1],I=s.useCallback((function(e){M(!S),v&&v(e,!S)}),[S,v,M]),A=s.Children.toArray(a),F=Object(i.a)(A),L=F[0],U=F.slice(1),H=s.useMemo((function(){return{expanded:S,disabled:p,toggle:I}}),[S,p,I]);return s.createElement(j.a,Object(c.a)({className:Object(m.a)(r.root,o,S&&r.expanded,p&&r.disabled,!E&&r.rounded),ref:t,square:E},C),s.createElement(y.Provider,{value:H},L),s.createElement(N,Object(c.a)({in:S,timeout:"auto"},R),s.createElement("div",{"aria-labelledby":L.props.id,id:L.props["aria-controls"],role:"region"},U)))})),R=Object(p.a)((function(e){var t={duration:e.transitions.duration.shortest};return{root:{position:"relative",transition:e.transitions.create(["margin"],t),"&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:e.palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-child":{"&:before":{display:"none"}},"&$expanded":{margin:"16px 0","&:first-child":{marginTop:0},"&:last-child":{marginBottom:0},"&:before":{opacity:0}},"&$expanded + &":{"&:before":{display:"none"}},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},rounded:{borderRadius:0,"&:first-child":{borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius},"&:last-child":{borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},expanded:{},disabled:{}}}),{name:"MuiAccordion"})(N),C=a(94),w=a(225),k=s.forwardRef((function(e,t){var a=e.children,n=e.classes,r=e.className,o=e.expandIcon,l=e.IconButtonProps,i=e.onBlur,d=e.onClick,f=e.onFocusVisible,p=Object(u.a)(e,["children","classes","className","expandIcon","IconButtonProps","onBlur","onClick","onFocusVisible"]),b=s.useState(!1),v=b[0],g=b[1],E=s.useContext(y),h=E.disabled,O=void 0!==h&&h,j=E.expanded,x=E.toggle;return s.createElement(C.a,Object(c.a)({focusRipple:!1,disableRipple:!0,disabled:O,component:"div","aria-expanded":j,className:Object(m.a)(n.root,r,O&&n.disabled,j&&n.expanded,v&&n.focused),onFocusVisible:function(e){g(!0),f&&f(e)},onBlur:function(e){g(!1),i&&i(e)},onClick:function(e){x&&x(e),d&&d(e)},ref:t},p),s.createElement("div",{className:Object(m.a)(n.content,j&&n.expanded)},a),o&&s.createElement(w.a,Object(c.a)({className:Object(m.a)(n.expandIcon,j&&n.expanded),edge:"end",component:"div",tabIndex:null,role:null,"aria-hidden":!0},l),o))})),S=Object(p.a)((function(e){var t={duration:e.transitions.duration.shortest};return{root:{display:"flex",minHeight:48,transition:e.transitions.create(["min-height","background-color"],t),padding:e.spacing(0,2),"&:hover:not($disabled)":{cursor:"pointer"},"&$expanded":{minHeight:64},"&$focused":{backgroundColor:e.palette.action.focus},"&$disabled":{opacity:e.palette.action.disabledOpacity}},expanded:{},focused:{},disabled:{},content:{display:"flex",flexGrow:1,transition:e.transitions.create(["margin"],t),margin:"12px 0","&$expanded":{margin:"20px 0"}},expandIcon:{transform:"rotate(0deg)",transition:e.transitions.create("transform",t),"&:hover":{backgroundColor:"transparent"},"&$expanded":{transform:"rotate(180deg)"}}}}),{name:"MuiAccordionSummary"})(k),M=s.forwardRef((function(e,t){var a=e.classes,n=e.className,r=Object(u.a)(e,["classes","className"]);return s.createElement("div",Object(c.a)({className:Object(m.a)(a.root,n),ref:t},r))})),I=Object(p.a)((function(e){return{root:{display:"flex",padding:e.spacing(1,2,2)}}}),{name:"MuiAccordionDetails"})(M),A=a(227),F=a(229),L=a(231),U=a(232),H=a(230),B=a(29),P=Object(B.a)(s.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),T=a(40),D=a(284),V=a(52),$=a(28),_=a.n($),z=a(68),J=a(66),q=a(17),W=a(45),G=a(285),K=a(283),Y=function(){var e=Object(s.useState)(),t=Object(n.a)(e,2),a=t[0],r=t[1],o=a?["memory","CPU"].filter((function(e){return a[e]})).map((function(e){return[e,a[e]]})):[];return Object(s.useEffect)((function(){Object(K.a)().then((function(e){return r(e.data.data.resources)}))}),[]),o.length?d.a.createElement(V.a,{title:"Cluster Resource"},d.a.createElement("div",{style:{display:"flex",flexFlow:"row wrap",justifyContent:"space-around"}},o.map((function(e){var t=Object(n.a)(e,2),a=t[0],r=t[1];return d.a.createElement("div",{style:{margin:5,textAlign:"center",flex:1}},d.a.createElement(G.a,{resource:r,title:a}))})))):null},Q=a(228),X=a(218),Z=a(242),ee=a(177),te=Object(B.a)(s.createElement("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownwardOutlined"),ae=a(39),ne=a(96),re=a(33),oe=a(278),le=function(e,t){return Object(ae.get)(t,["nodeResource",e,"total"],0)-Object(ae.get)(t,["nodeResource",e,"available"],0)},ce=function(e){var t,a=e.hostResources,r=e.cols,o=Object(s.useState)(""),c=Object(n.a)(o,2),i=c[0],u=c[1],m=Object(s.useState)(""),f=Object(n.a)(m,2),p=f[0],b=f[1],v=Object(s.useState)(0),g=Object(n.a)(v,2),E=g[0],h=g[1],O=Object(s.useState)(10),j=Object(n.a)(O,2),y=j[0],x=j[1],N=Object(s.useContext)(ne.a).nodeMap,R=a.filter((function(e){return!i||e.hostName.includes(i)})).sort((t=p,function(e,a){return t?le(a,t)-le(e,t):0})),C=R.slice(E*y,(E+1)*y);return Object(s.useEffect)((function(){h(0)}),[i,y]),d.a.createElement(Q.a,{size:"small"},d.a.createElement(F.a,null,d.a.createElement(L.a,null,"Hostname"," ",d.a.createElement(X.a,{value:i,onChange:function(e){var t=e.target.value;return u(t)},endAdornment:d.a.createElement(ee.a,null)})),r.map((function(e){return d.a.createElement(L.a,null,e," ",d.a.createElement(l.a,{onClick:function(){return b(p===e?"":e)},size:"small"},p===e?d.a.createElement(te,{color:"primary"}):d.a.createElement(te,null)))}))),d.a.createElement(U.a,null,C.map((function(e){return d.a.createElement(H.a,null,d.a.createElement(L.a,null,d.a.createElement(T.b,{target:"_blank",to:"/node/".concat(N[e.hostName])},e.hostName)),r.map((function(t){var a,n=e.nodeResource[t]||{},r=n.total,o=n.available,l=r-o;return void 0===r||void 0===o?null:d.a.createElement(L.a,null,d.a.createElement(re.a,{num:l,total:r},null==l?void 0:l.toFixed(0),"/",null==r?void 0:r.toFixed(0),"(",null===(a=Math.round(l/r*100))||void 0===a?void 0:a.toFixed(0),"%)"))})))}))),d.a.createElement(Z.a,{count:R.length,rowsPerPage:y,onChangeRowsPerPage:function(e){var t=e.target.value;x(Number(t))},page:E,onChangePage:function(e,t){return h(t)}}))},ie=function(){var e=Object(s.useState)([]),t=Object(n.a)(e,2),a=t[0],r=t[1],o=Object(s.useState)([]),l=Object(n.a)(o,2),c=l[0],i=l[1];return Object(s.useEffect)((function(){Object(K.c)().then((function(e){var t,a;if(null==e||null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.resourceView){var n=e.data.data.resourceView,o=new Set,l=n.map((function(e){var t=e.namespaceId,a={};return{namespaceId:t,hostResources:e.hostResources.map((function(e){var t={};return e.resources.forEach((function(e){e.resourceName&&(o.add(e.resourceName),t[e.resourceName]={available:e.available,total:e.total},a[e.resourceName]?(a[e.resourceName].available+=e.available,a[e.resourceName].total+=e.total):a[e.resourceName]={available:e.available,total:e.total})})),{hostName:e.hostName,nodeResource:t}})),resourcesMap:a}}));r(l),i(Array.from(o))}}))}),[]),a.length?d.a.createElement(V.a,{title:"Namespaces"},d.a.createElement(Q.a,null,d.a.createElement(F.a,null,d.a.createElement(L.a,null),d.a.createElement(L.a,{align:"center"},"Namespaces Id"),c.map((function(e){return d.a.createElement(L.a,{align:"center"},e)}))),d.a.createElement(U.a,null,a.map((function(e){return d.a.createElement(oe.a,{length:e.hostResources.length,expandComponent:d.a.createElement(ce,{cols:c,hostResources:e.hostResources})},d.a.createElement(L.a,{align:"center"}," ",d.a.createElement(D.a,{text:e.namespaceId,noCollapse:!0})),c.map((function(t){var a,n=e.resourcesMap[t]||{},r=n.total,o=void 0===r?0:r,l=n.available,c=o-(void 0===l?0:l);return d.a.createElement(L.a,{align:"center"},d.a.createElement(re.a,{num:c,total:o},null==c?void 0:c.toFixed(0),"/",null==o?void 0:o.toFixed(0),"(",null===(a=Math.round(c/o*100))||void 0===a?void 0:a.toFixed(0),"%)"))})))}))))):null},ue=Object(r.a)((function(e){return{root:{padding:e.spacing(2)},label:{fontWeight:"bold"}}})),se=function(){var e=Object(s.useState)(),t=Object(n.a)(e,2),a=t[0],r=t[1],o=Object(s.useState)(),l=Object(n.a)(o,2),c=l[0],i=l[1],u=Object(s.useState)([]),d=Object(n.a)(u,2),m=d[0],f=d[1];return Object(s.useEffect)((function(){_.a.get("ray_config").then((function(e){var t,a;(null==e||null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.config)&&r(e.data.data.config)}))}),[]),Object(s.useEffect)((function(){Object(J.e)().then((function(e){var t,a;(null==e||null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.namespaces)&&i(e.data.data.namespaces)}))}),[]),Object(s.useEffect)((function(){Object(z.b)().then((function(e){var t,a;(null==e||null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.summary)&&f(e.data.data.summary)}))}),[]),{rayConfig:a,namespaces:c,nodes:m}};t.default=function(){var e=se(),t=e.rayConfig,a=e.namespaces,r=e.nodes,c=ue(),i=Object(W.e)((null==t?void 0:t.slsUrl)||{});return d.a.createElement("div",{className:c.root},d.a.createElement(W.b,{title:"".concat((null==t?void 0:t.clusterName)||"Ray"," Summary ")}),d.a.createElement(V.a,{title:(null==t?void 0:t.clusterName)||"SUMMARY"},d.a.createElement("p",null,"Frontend Version: 1.8.1"),d.a.createElement(o.a,{container:!0,spacing:2},(null==t?void 0:t.imageUrl)&&d.a.createElement(o.a,{item:!0},d.a.createElement(l.a,null,d.a.createElement("a",{href:t.imageUrl,target:"_blank",rel:"noopener noreferrer"},"Image Url"))),(null==t?void 0:t.sourceCodeLink)&&d.a.createElement(o.a,{item:!0},d.a.createElement(l.a,null,d.a.createElement("a",{href:t.sourceCodeLink,target:"_blank",rel:"noopener noreferrer"},"Source Code"))),(null==t?void 0:t.metricUrl)&&d.a.createElement(o.a,{item:!0},d.a.createElement(l.a,null,d.a.createElement("a",{href:t.metricUrl,target:"_blank",rel:"noopener noreferrer"},"Metric Url"))),(null==t?void 0:t.slsUrl)&&(i instanceof Array?i.map((function(e){return d.a.createElement(o.a,{item:!0},d.a.createElement(l.a,null,e))})):d.a.createElement(o.a,{item:!0},d.a.createElement(l.a,null,i))),(null==t?void 0:t.rayOperatorEventUrl)&&d.a.createElement(o.a,{item:!0},d.a.createElement(l.a,null,d.a.createElement("a",{href:t.rayOperatorEventUrl,target:"_blank",rel:"noopener noreferrer"},"Deploy Event(SLS)"))))),d.a.createElement(Y,null),d.a.createElement(ie,null)||a&&d.a.createElement(V.a,{title:"Namespaces"},a.map((function(e){return d.a.createElement(R,null,d.a.createElement(S,{expandIcon:d.a.createElement(P,null)},d.a.createElement("p",{className:c.label},d.a.createElement(D.a,{text:e.namespaceId,noCollapse:!0}),"(",e.hostNameList.length," Nodes)")),d.a.createElement(I,null,d.a.createElement(o.a,{style:{maxHeight:300,overflow:"auto"}},e.hostNameList.sort((function(e,t){return e.length-t.length})).map((function(e){var t;return d.a.createElement(l.a,{size:"small"},e.includes("[unregistered]")?e:d.a.createElement(T.b,{key:"host",style:{margin:4},to:"node/".concat((null===(t=r.find((function(t){return t.hostname===e&&"ALIVE"===t.raylet.state})))||void 0===t?void 0:t.raylet.nodeId)||"")},e))})))))}))),t&&d.a.createElement(V.a,{title:"Config"},d.a.createElement(A.a,null,d.a.createElement(F.a,null,d.a.createElement(L.a,null,"Key"),d.a.createElement(L.a,null,"Value")),d.a.createElement(U.a,null,Object.entries(t).map((function(e){var t=Object(n.a)(e,2),a=t[0],r=t[1];return d.a.createElement(H.a,null,d.a.createElement(L.a,{className:c.label},a),d.a.createElement(L.a,null,function(e,t){return"containerMemory"===e?Object(q.a)(1024*t*1024):"slsUrl"===e?Object(W.e)(t):JSON.stringify(t)}(a,r)))}))))))}}}]);