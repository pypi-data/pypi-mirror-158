{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "types": {
      "nullable_unit": {
        "oneOf": [
          {
            "type": "null"
          },
          {
            "$ref": "#/definitions/unit"
          }
        ]
      },
      "nullable_range": {
        "oneOf": [
          {
            "type": "null"
          },
          {
            "type": "string"
          },
          {
            "type": "array",
            "minItems": 2,
            "maxItems": 2,
            "uniqueItems": true,
            "items": {
              "type": "string"
            }
          }
        ]
      },
      "link_identifier": {
        "oneOf": [
          {
            "type": "number"
          },
          {
            "type": "array",
            "minItems": 1,
            "uniqueItems": true,
            "items": {
              "type": "number"
            }
          }
        ]
      }
    },
    "type": {
      "type": "string",
      "enum": [
        "A",
        "B",
        "C",
        "E",
        "EV",
        "EVC",
        "H",
        "I",
        "L",
        "P",
        "S",
        "T",
        "V"
      ]
    },
    "unit": {
      "type": "string",
      "enum": [
        "W",
        "Wmin",
        "Wh",
        "V",
        "A",
        "C",
        "F",
        "K",
        "deg",
        "lux",
        "ppm",
        "s",
        "pct"
      ]
    }
  },
  "type": "object",
  "properties": {
    "blk": {
      "type": "array",
      "minItems": 1,
      "uniqueItems": true,
      "items": {
        "type": "object",
        "properties": {
          "I": {
            "type": "integer",
            "description" : "Block identifier"
          },
          "D": {
            "type": "string",
            "description" : "Block description"
          }
        },
        "required": [
          "I",
          "D"
        ]
      }
    },
    "sen": {
      "type": "array",
      "minItems": 1,
      "uniqueItems": true,
      "items": {
        "type": "object",
        "properties": {
          "I": {
            "type": "integer",
            "description" : "Sensor identifier"
          },
          "T": {
            "$ref": "#/definitions/type",
            "description" : "Sensor type"
          },
          "D": {
            "type": "string",
            "description" : "Sensor description"
          },
          "U": {
            "$ref": "#/definitions/types/nullable_unit",
            "default": null,
            "description" : "Sensor unit"
          },
          "R": {
            "$ref": "#/definitions/types/nullable_range",
            "default": null,
            "description" : "Sensor range"
          },
          "L": {
            "$ref": "#/definitions/types/link_identifier",
            "description" : "Sensor to block link (Block identifier)"
          }
        },
        "required": [
          "I",
          "T",
          "D",
          "L"
        ]
      }
    }
  },
  "required": [
    "blk",
    "sen"
  ]
}
