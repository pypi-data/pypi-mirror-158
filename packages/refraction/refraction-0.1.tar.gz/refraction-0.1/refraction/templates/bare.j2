{# vim: set shiftwidth=2 tabstop=2 syntax=html: #}
<!doctype html>
<html lang='en'>
<head>
  <meta charset='utf-8'>
  <meta name="author" content="Peter Mawhorter">
  <title>Refractionâ€”{% block title %}Title{% endblock %}</title>
  <link
   rel="icon"
   type="image/png"
   href="{{url_for('static', filename='refractionIcon.png')}}"
  >
  <link
   rel='stylesheet'
   href="{{url_for('static', filename='refraction.css')}}"
  >
  <script
   defer
   type="module"
   src="{{url_for('static', filename='refraction.js')}}"
  >
  </script>
  {% block head_stuff %} {% endblock %}
</head>
<body {% block body_attrs %} {%endblock %}>

{% macro timer(seconds) -%}
<div
 role="timer"
 aria-live="off"
 class="timer"
 data-time="{{seconds}}"
>
  {% if seconds < 0 %}
    ({{seconds|fuzzyTime}} ago)
  {% else %}
    ({{seconds|fuzzyTime}}&nbsp;from&nbsp;now)
  {% endif %}
</div>
{%- endmacro %}

{% with messages = get_flashed_messages() %}
  {% if messages %}
    <div id="messages">
    {% for msg in messages %}
      <p>{{msg|safe}}</p>
    {% endfor %}
    </div>
  {% endif %}
{% endwith %}

<div id="user_info" tabindex="0">
<!-- tabindex here insures that tabbing through the page speaks this
 important information -->
{% if username %}
  You are logged in as: <strong>{{username}}</strong>.
  <a href="{{url_for('cas.logout')}}">Click here to log out.</a>
{% else %}
  You are not logged in.
  <a href="{{url_for('cas.login')}}">Click here to log in.</a>
{% endif %}
</div>

{% if masqueradeAs %}
<div id="important_info">
  {% if masqueradeAs %}
  <div id="masquerade" tabindex=0>
    You are viewing the perspective of: <strong>{{masqueradeAs}}</strong>.
    Actions you take will affect their account!
  </div>
  {% endif %}
  <style>
/* Make space for pinned messages */
body {
    margin-top: 8em !important;
}
  </style>
</div>
{% endif %}
            
{% block body %}
<h1>Body content here.</h1>
{% endblock %}

</body>
</html>
